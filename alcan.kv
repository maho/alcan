#:import defs defs
#:import Vec2d cymunk.Vec2d

<Wizard>:
    size: 78, 98

    canvas:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'img/wizard.png'

<Element>:
    size: 40, 40
    imgsrc: None
    activated: False

    canvas:

        Color:
            rgb: (0.8, 1.0, 0.9, 0.3) if root.activated else (1.0, 1.0, 1.0, 1.0)

        Ellipse:
            pos: self.pos
            size: self.size


        Rectangle:
            pos: self.pos
            size: self.size
            source: root.imgsrc


<Cannon>:
    size: 100, 100
    angle: 0

    offset: 0, -25

    canvas:
        PushMatrix
        Rotate
            angle: root.angle
            origin: Vec2d(self.center) + Vec2d(self.offset)

        Rectangle:
            pos: root.pos
            size: self.size
            source: "img/cannon.png"

        PopMatrix

<Explosion>:
    size: 100, 100
    frame: 1
    canvas:
        Rectangle:
            pos: root.pos
            size: self.size
            source: "img/explosion%02d.png"%root.frame


<Baloon>:
    canvas:
        Color:
            rgb: 0,0,0
        Line:
            width: 3
            ellipse: root.pos + root.size
        Line:
            points: [root.center[0] - 8, root.center[1] + 8] + root.anchor 
            width: 2
        Color:
            rgb: (1, 1, 1)
        Ellipse: 
            pos: root.pos
            size: root.size

    anchor: (0, 0)
    text: "..."

    Label:
        size: root.size
        pos: root.pos
        text: root.text
        color: 0,0,0,1


<AlcanGame>:
    
    canvas:
        Scale:
            xyz: (root.scale, root.scale, root.scale)
        Rectangle:
            pos: self.pos
            size: defs.map_size
            source: 'img/bg.jpg'

    wizard: wizard
    cannon: cannon
    scale: 1.0


    Cannon:
        id: cannon
        pos: 400, 50
        mass: None
        momentum: None 

    Wizard:
        id: wizard
        pos: 300, 100
